# TASK

```golang

func main() {
    writes := 1000
    var storage map[int]int
    var mu = &sync.Mutex
    wg := sync.WaitGroup{}
    

    wg.Add(writes)
    for i := 0; i < writes; i++ {
        i := i

        go func() {
            defer wg.Done()
            mu.Lock()
            storage[i] = i
            mu.Unlock()
        }()
    }

    wg.Wait()
    println(storage)
}

```

Ошибки:
1) map является nil, поэтому будет паника из-за доступа к nil
2) map не является конкурентной структурой, поэтому будет паника

Решение:
1) Инициализировать map
2) на операцию сохранения данных использовать mutex
   1) В пакете sync есть Map


```golang

func main() {
    writes := 1000
    storage := make(map[int]int, writes)
    var mu = &sync.Mutex
    wg := sync.WaitGroup{}
    

    wg.Add(writes)
    for i := 0; i < writes; i++ {
        i := i

        go func() {
            defer wg.Done()
            mu.Lock()
            storage[i] = i
            mu.Unlock()
        }()
    }

    wg.Wait()
    println(storage)
}

```