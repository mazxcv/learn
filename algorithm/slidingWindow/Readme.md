# Sliding window

## Шаблон скользящего окна
Здесь используется два указателя для определения окна, которое перемещается по структуре данных (обычно массив или строка) для нахождения подмассивов или подстрок, соответствующих определнным требованиям.

Основная  ценность - снижение Time Complexity $O(n^2)$ -> $O(n)$

### Что это

Способ эффективной обработки подмножества данных, когда нужно сосредоточиться только на обработке окна данных 

### Как это работает

Пример для шаблона скользящего окна фиксированной длины $k$
Задача: посчитать максимальную сумму подмассива размером $k$
1) Сначала посчитать сумму для самого первого окна $windowSum$
2) И нициализировать и установить $result = windowSum$ 
3) В цикле от $k$ до $len(arr)$:
   1) Переместить окно на одну позицию
   2) Пересчитать заново $windowSum$: добавить элемент под индексом $i$ и отнять элемент под индексом $i-k$
   3) Сравнить $windowSum$ с $result$ и обновить $result$, если потребуется
4) Вернуть $result$
Здесь вся задача решается  в один проход и следовательно $Time Complexity$ составляет $O(n)$

Пример для шаблона скользящего окна переменной длины по условию $condition$
1) Установить левый указатель на первую позицию в массиве
2) Инициализировать состояние окна $windowState$ и $res$
3) В цикле двигаем правый указатель по массиву от нулевого индекса до конца 
   1) Обновить $windowState$ 
   2) Цикл пока нарушается условие $condition$:
      1) обновляем, если это возможно $res$
      2) обновляем $windowState$, например исключаем значение массива по левому указателю (идея, что он станет вновь допустиым по условию $condition$)
      3) Передвигаем левый указатель
4) Возвращаем $res$

### Виды скользящих окон 

Существуют 2 вида скользящих окон:
1) Скольящее окно фиксированной ширины:
   1) Сохраняет постоянную длину при перемерщении по структуре.
   2) Обычно размер известен заранее.
   3) Требуется найти подмассив фиксированной длины, который удоввлетворяет определенному условию, например, надо найти в массиве подмассив размера $k$ с максимальной суммой.
2) Скользящее окно переменной ширины:
   1) Расширяется и сужается на основе некоторых условий.
   2) Обычно задача требует найти самый большой подмассив или подстроку, которые удовлетворяют некоторому условию

### Общий шаблон

### Примеры 

#### Примерный шаблон скользящего окна фиксированной ширины

```python
init windowSum = 0
init res 

for i from 0 to k-1:
    windowSum += arr[i]

res = windowSum

#Slide the window across the array
for i from k to arr.length - 1:
    windowSum += arr[i] - arr[i-k]
    update res # for example res = max(res, windowSum)

return res
```


Примерный шаблон скользящего окна переменной ширины 

```python
init left = 0
init windowState (sum, count, freequency map)
init res 

for right from 0 to arr.length -1:
    update windowState to include arr[right] # Expand the window

    while windowState violate condition:
        update res # if needed
        update windowState to exclude arr[left] #shrink the window
        move left pointer forward

return res

```